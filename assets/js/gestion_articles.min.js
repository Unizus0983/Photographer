function componentsElement(e,t,n){const a=document.createElement(e);return a.textContent=t,n&&(a.className=n),a}function addArticle(e){const t=componentsElement("article");t.className="articleEdit";const n=componentsElement("div");n.className="headerArticle",t.appendChild(n);const a=componentsElement("h1",e.titre,"article_title");n.appendChild(a);const r=componentsElement("small",`publié le ${formatDate(e.date_publication)}`,"article_date");if(n.appendChild(r),e.image&&""!==e.image.trim()){const t=document.createElement("img");t.src=`./app/uploads/${e.image}`,t.alt=e.titre,t.className="article_image",n.appendChild(t)}const o=componentsElement("div");return o.className="content_article",t.appendChild(o),o.innerHTML=DOMPurify.sanitize(e.contenu,{ADD_ATTR:["target","rel"],ALLOWED_ATTR:["href","target","rel","class","style","id"]}),t}function formatDate(e){let t=new Date(e);return t.toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric"})}function loadingArticles(e=1){const t=document.getElementById("articles-container");fetch(`app/admin/api_articles.php?page=${e}`).then(e=>e.json()).then(e=>{for(;t.firstChild;)t.removeChild(t.firstChild);if(!e.success)return console.error("❌ Erreur API:",e.error),void t.appendChild(componentsElement("p",`Erreur API : ${e.error}`,"alert-message error"));e.data.forEach(e=>{t.appendChild(addArticle(e))}),currentPage=e.pagination.current_page,totalPages=e.pagination.total_page,addControlPagination()}).catch(e=>{console.error("❌ Erreur:",e),t.appendChild(componentsElement("p","Erreur de chargement","error"))})}function addControlPagination(){const e=document.getElementById("articles-container");if(!e)return void console.error("❌ Élément #articles-container introuvable !");const t=document.querySelector(".pagination");t&&t.remove();const n=componentsElement("div","","pagination");if(currentPage>1){const e=componentsElement("button","← Précédent"," btn btn-pagination");e.addEventListener("click",()=>loadingArticles(currentPage-1)),n.appendChild(e)}const a=componentsElement("span",`Page ${currentPage}/${totalPages}`);if(n.appendChild(a),currentPage<totalPages){const e=componentsElement("button","Suivant →"," btn btn-pagination");e.addEventListener("click",()=>loadingArticles(currentPage+1)),n.appendChild(e)}e.after(n)}console.log("✅ JavaScript chargé - Début du chargement des articles");let currentPage=1,totalPages=1;document.addEventListener("DOMContentLoaded",function(){loadingArticles(1)});